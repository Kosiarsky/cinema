// Sync values from process.env (SSR/.env) into runtime-config.js for CSR at dev/build time.
// Usage:
//   node scripts\write-runtime-config.js
// This will write src/assets/runtime-config.js with values from env if provided.

import fs from 'node:fs';
import path from 'node:path';
import 'dotenv/config';

const api = process.env.API_BASE_URL || '';
const app = process.env.FRONTEND_BASE_URL || '';

const out = `// Auto-generated by scripts/write-runtime-config.js\n` +
`window.__API_BASE_URL__ = ${api ? JSON.stringify(api) : 'window.__API_BASE_URL__ || undefined'};\n` +
`window.__FRONTEND_BASE_URL__ = ${app ? JSON.stringify(app) : 'window.__FRONTEND_BASE_URL__ || undefined'};\n`;

const target = path.resolve('src/assets/runtime-config.js');
fs.writeFileSync(target, out, 'utf8');
console.log('Wrote runtime-config.js with API_BASE_URL=%s FRONTEND_BASE_URL=%s', api || '(leave)', app || '(leave)');
